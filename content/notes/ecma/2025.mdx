---
title: ES2025(ç¬¬16ç‰ˆ)
description: ECMAScript2025 å·²äº2025å¹´6æœˆ25æ—¥æ­£å¼å‘å¸ƒï¼Œè¯¥è§„èŒƒæ ‡å‡†åŒ–äº†æ–°çš„ JavaScript åŠŸèƒ½ï¼ŒåŒ…æ‹¬ JSON æ¨¡å—ã€import å±æ€§ã€æ–°çš„ Set æ–¹æ³•ã€åŒæ­¥è¿­ä»£å™¨å¸®åŠ©ç¨‹åºå’Œæ­£åˆ™è¡¨è¾¾å¼ä¿®é¥°ç¬¦ã€‚
icon: Sparkles
keywords:
  - ES2025
  - ES2025ææ¡ˆçš„å†…å®¹
preview: aaa
---

- [GitHub ECMA-262](https://github.com/tc39/proposals/blob/main/finished-proposals.md) é¡µé¢ä¸Šå·²å®Œæˆçš„ 9 ä¸ªææ¡ˆè·å¾—äº†æ‰¹å‡†
- [GitHub ECMA-402](https://github.com/tc39/proposals/blob/main/ecma402/finished-proposals.md) é¡µé¢ä¸Šçš„ç”¨äºæŒç»­æ—¶é—´æ ¼å¼åŒ–å¯¹è±¡ `Intl.DurationFormat`

## Intl.DurationFormat (æŒç»­æ—¶é—´æ ¼å¼åŒ–)

### åŸºæœ¬ç”¨æ³•

```js
const duration = {
  hours: 1,
  minutes: 30,
  seconds: 10,
};
new Intl.DurationFormat("zh-CN", { style: "short" }).format(duration);
// -> '1å°æ—¶30åˆ†é’Ÿ10ç§’'
new Intl.DurationFormat("zh-CN", { style: "long" }).format(duration);
// -> '1å°æ—¶30åˆ†é’Ÿ10ç§’é’Ÿ'
```

### API

- [Intl.DurationFormat](https://github.com/tc39/proposal-intl-duration-format?tab=readme-ov-file#api-design)
- [Intl.DurationFormat#format](https://github.com/tc39/proposal-intl-duration-format?tab=readme-ov-file#intldurationformatformat)
- [Intl.DurationFormat#formatToParts](https://github.com/tc39/proposal-intl-duration-format?tab=readme-ov-file#intldurationformatformattoparts)

## Import Attributesï¼ˆå¯¼å…¥å±æ€§ï¼‰ä¸ JSON Modulesï¼ˆJSONæ¨¡å—ï¼‰

[JSONæ¨¡å—ææ¡ˆ](https://github.com/tc39/proposal-json-modules) åŸºäº [å¯¼å…¥å±æ€§ææ¡ˆ](https://github.com/tc39/proposal-import-attributes) ï¼Œæ·»åŠ äº†è·¨ JavaScript ç¯å¢ƒä»¥é€šç”¨æ–¹å¼å¯¼å…¥ JSON æ¨¡å—çš„åŠŸèƒ½ã€‚

### ä½¿ç”¨

```js
// é™æ€å¯¼å…¥
import json from "./foo.json" with { type: "json" };
// åŠ¨æ€å¯¼å…¥
await import("foo.json", { with: { type: "json" } });
```

[æŸ¥çœ‹è¯¦ç»†](https://github.com/tc39/proposal-json-modules)

## Seté›†åˆæ–¹æ³• - æ·»åŠ æ ‡å‡†çš„æ•°å­¦é›†åˆè¿ç®—æ“ä½œ

### æ–¹æ³•åˆ—è¡¨

- Set.prototype.intersection(other) - äº¤é›†
- Set.prototype.union(other) - å¹¶é›†
- Set.prototype.difference(other) - å·®é›†
- Set.prototype.symmetricDifference(other) - å¯¹ç§°å·®é›†
- Set.prototype.isSubsetOf(other) - å­é›†åˆ¤æ–­
- Set.prototype.isSupersetOf(other) - è¶…é›†åˆ¤æ–­
- Set.prototype.isDisjointFrom(other) - ä¸ç›¸äº¤åˆ¤æ–­

### ä½¿ç”¨

```js tab="äº¤é›†"
const setA = new Set([1, 2, 3]);
const setB = new Set([3, 4, 5]);
setA.intersection(setB); // Set {3}
```

```js tab="å¹¶é›†"
const setA = new Set([1, 2, 3]);
const setB = new Set([3, 4, 5]);
setA.union(setB); // Set {1, 2, 3, 4, 5}
```

```js tab="å·®é›†"
const setA = new Set([1, 2, 3]);
const setB = new Set([3, 4, 5]);
setA.difference(setB); // Set {1, 2}
```

```js tab="å¯¹ç§°å·®é›†"
const setA = new Set([1, 2, 3]);
const setB = new Set([3, 4, 5]);
setA.symmetricDifference(setB); // Set {1, 2, 4, 5}
```

```js tab="å­é›†"
const setA = new Set([1, 2, 3]);
const setB = new Set([3, 4, 5]);
const setC = new Set([1, 2, 3, 4]);
setA.isSubsetOf(setB); // false
setA.isSubsetOf(setC); // true
```

```js tab="è¶…é›†"
const setA = new Set([1, 2, 3]);
const setB = new Set([3, 4, 5]);
const setC = new Set([2, 3]);
setA.isSupersetOf(setB); // false
setA.isSupersetOf(setC); // true
```

```js tab="ä¸ç›¸äº¤"
const setA = new Set([1, 2, 3]);
const setB = new Set([3, 4, 5]);
const setC = new Set([4, 5, 6]);
setA.isDisjointFrom(setB); // false ç›¸äº¤
setA.isDisjointFrom(setC); // true ä¸ç›¸äº¤
```

### polyfill

- [core-js](https://github.com/zloirock/core-js#new-set-methods)
- [es-shimes](https://github.com/es-shims)
  > - [difference](https://npmjs.com/set.prototype.difference)
  > - [intersection](https://npmjs.com/set.prototype.intersection)
  > - [symmetricDifference](https://npmjs.com/set.prototype.symmetricdifference)
  > - [union](https://npmjs.com/set.prototype.union)
  > - [isDisjointFrom](https://npmjs.com/set.prototype.isdisjointfrom)
  > - [isSubsetOf](https://npmjs.com/set.prototype.issubsetof)
  > - [isSupersetOf](https://npmjs.com/set.prototype.issupersetof)

## æ­£åˆ™è¡¨è¾¾å¼çš„ä¸åŒåˆ†æ”¯ä¸­ä½¿ç”¨ç›¸åŒçš„ç»„å

å…è®¸åœ¨æ­£åˆ™è¡¨è¾¾å¼çš„ä¸åŒåˆ†æ”¯ä¸­ä½¿ç”¨ç›¸åŒçš„ç»„åã€‚

2024å¹´8æœˆèµ·åœ¨ä¸»è¦æµè§ˆå™¨å·²å®ç°ï¼š [æŸ¥çœ‹å…¼å®¹](https://caniuse.com/mdn-javascript_regular_expressions_named_capturing_group_duplicate_named_capturing_groups) [æŸ¥çœ‹è¯¦ç»†](https://github.com/tc39/proposal-duplicate-named-capturing-groups)

## æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„å­—ç¬¦è½¬ä¹‰

è¯¥ææ¡ˆæ—¨åœ¨ç ”ç©¶è½¬ä¹‰å­—ç¬¦ä¸²ä»¥åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„é—®é¢˜é¢†åŸŸã€‚

[æ­£å¼è§„èŒƒå†…å®¹](https://tc39.es/proposal-regex-escaping/) æ­¤ææ¡ˆæ˜¯ [ç¬¬å››é˜¶æ®µ](https://github.com/tc39/proposals) ææ¡ˆ

### ææ¡ˆåŠ¨æœº

é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æƒ³ä»å­—ç¬¦ä¸²ä¸­æ„å»ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œè€Œä¸å°†å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦è§†ä¸ºç‰¹æ®Šçš„æ­£åˆ™è¡¨è¾¾å¼æ ‡è®°ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ›¿æ¢æˆ‘ä»¬ä»ç”¨æˆ·é‚£é‡Œå¾—åˆ°çš„å­—ç¬¦ä¸² `let text = â€œHello.â€` çš„æ‰€æœ‰åŒ¹é…é¡¹ï¼Œæˆ‘ä»¬å¯èƒ½å¾ˆæƒ³æ‰§è¡Œ `myText.replace(new RegExp(text, "g"), "")` .ä½†æ˜¯ï¼Œè¿™ä¼šå°† `.` ä¸ä»»ä½•å­—ç¬¦åŒ¹é…ï¼Œè€Œä¸æ˜¯å°†å…¶ä¸ç‚¹åŒ¹é…ã€‚

### å®ç°æ–¹æ¡ˆ

ä½¿ç”¨`Regexp.escape` æ–¹æ³•è½¬ä¹‰

```js
RegExp.escape("The Quick Brown Fox"); // "\\x54he\\x20Quick\\x20Brown\\x20Fox"
RegExp.escape("Buy it. use it. break it. fix it."); // "\\x42uy\\x20it\\.\\x20use\\x20it\\.\\x20break\\x20it\\.\\x20fix\\x20it\\."
RegExp.escape("(*.*)"); // "\\(\\*\\.\\*\\)"
RegExp.escape("ï½¡^ï½¥ï½ªï½¥^ï½¡"); // "ï½¡\\^ï½¥ï½ªï½¥\\^ï½¡"
RegExp.escape("ğŸ˜Š *_* +_+ ... ğŸ‘"); // "ğŸ˜Š\\x20\\*_\\*\\x20\\+_\\+\\x20\\.\\.\\.\\x20ğŸ‘"
RegExp.escape("\\d \\D (?:)"); // "\\\\d\\x20\\\\D\\x20\\(\\?\\x3a\\)"
```

### ä½¿ç”¨

```js tab="ä¸ä½¿ç”¨è½¬ä¹‰"
let text = "Hello."; // æ¥è‡ªç”¨æˆ·è¾“å…¥
const myText = "Hello World! Hello.";
const result = myText.replace(new RegExp(text, "g"), "");
// result ç»“æœæ˜¯ "World! " æœŸæœ›æ˜¯ "Hello World! "
```

```js tab="ä½¿ç”¨è½¬ä¹‰"
let text = "Hello."; // æ¥è‡ªç”¨æˆ·è¾“å…¥
const myText = "Hello World! Hello.";
const result = myText.replace(new RegExp(RegExp.escape(text), "g"), "");
// result ç»“æœæ˜¯ "Hello World! "
```

### polyfill

- es-shimes: [regexp.escape](https://www.npmjs.com/package/regexp.escape)
- [core-js](https://www.npmjs.com/package/core-js)
- [@li/regexp-escape-polyfill](https://jsr.io/@li/regexp-escape-polyfill)

## æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¿®é¥°ç¬¦

å…è®¸å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„éƒ¨åˆ†åº”ç”¨æ ‡å¿—ï¼Œè€Œä¸æ˜¯æ•´ä¸ªè¡¨è¾¾å¼ã€‚

### è¯­æ³•

- `i` - å¿½ç•¥å¤§å°å†™
- `m` - å¤šè¡Œ
- `s` - å•è¡Œ
- `x` - [æ‰©å±•æ¨¡å¼](https://github.com/rbuckton/proposal-regexp-x-mode)

- `(?imsx-imsx:subexpression)` â€” è®¾ç½®æˆ–è€…å–æ¶ˆè®¾ç½®(ä½¿ç”¨ `-`)å­è¡¨è¾¾å¼çš„æŒ‡å®šæ ‡å¿—

### ä½¿ç”¨

```js tab="è®¾ç½®"
// ä½¿ h å¿½ç•¥å¤§å°å†™
const reg = /^(?i:h)ello$/;
reg.test("Hello"); // true
reg.test("hello"); // true
reg.test("hEllo"); // false
```

```js tab="å–æ¶ˆè®¾ç½®"
// ä½¿ h å–æ¶ˆå¿½ç•¥å¤§å°å†™
const reg = /^(?-i:h)ello$/i;
reg.test("Hello"); // false
reg.test("hello"); // true
```

## æ·»åŠ 16ä½æµ®ç‚¹æ•°æ”¯æŒ

- æ·»åŠ ä¸€ç§æ–°çš„TypedArray `Float16Array` ä»¥è¡¥å……ç°æœ‰çš„ `Float32Array` å’Œ `Float64Array`ã€‚
- åœ¨ `DataView` ä¸Šæ·»åŠ ä¸¤ä¸ªç”¨äºè¯»å–å’Œè®¾ç½® `float16` å€¼çš„æ–°æ–¹æ³• `getFloat16` å’Œ `setFloat16`, ä»¥è¡¥å……ç°æœ‰çš„ç”¨äºå¤„ç†å…¨ç²¾åº¦å’ŒåŒç²¾åº¦æµ®ç‚¹æ•°çš„ç±»ä¼¼æ–¹æ³•ã€‚
- æä¾›äº† `Math.f16round` ä»¥è¡¥å……ç°æœ‰çš„ `Math.fround`
- [æ­£å¼è§„èŒƒå†…å®¹](https://tc39.es/proposal-float16array/)
- è¿™ä¸ªææ¡ˆæˆªè‡³2025å¹´2æœˆä¼šè®®æ—¶å¤„äº [TC39](https://tc39.es/process-document/) æµç¨‹çš„ç¬¬4é˜¶æ®µï¼šå·²å®Œæˆï¼Œå·²çº³å…¥ecma262ï¼Œå¹¶ [åœ¨æµè§ˆå™¨ä¸­å‘å¸ƒ](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float16Array)ã€‚

### å¯¹æ¯”

| ç‰¹æ€§              | Float16Array(åŠç²¾åº¦)                            | Float16Array(å•ç²¾åº¦)                            | Float16Array(åŒç²¾åº¦)                            |
| ----------------- | ----------------------------------------------- | ----------------------------------------------- | ----------------------------------------------- |
| å†…å­˜å ç”¨          | æ¯ä¸ªå…ƒç´ 2å­—èŠ‚<br />`new Float16Array(1000) 2KB` | æ¯ä¸ªå…ƒç´ 4å­—èŠ‚<br />`new Float32Array(1000) 4KB` | æ¯ä¸ªå…ƒç´ 8å­—èŠ‚<br />`new Float64Array(1000) 8KB` |
| IEEE754ç»“æ„       | 1 ç¬¦å·ä½ + 5 æŒ‡æ•°ä½ + 10 å°¾æ•°ä½                 | 1 ç¬¦å·ä½ + 8 æŒ‡æ•°ä½ + 23 å°¾æ•°ä½                 | 1 ç¬¦å·ä½ + 11 æŒ‡æ•°ä½ + 52 å°¾æ•°ä½                |
| èŒƒå›´              | Â±65504 (æ˜“æº¢å‡º/ä¸‹æº¢)                            | Â±3.4e38 (é€šç”¨)                                  | Â±1.8e308 (æå¤§/æå°å€¼)                          |
| â€‹â€‹æœ‰æ•ˆæ•°å­—ç²¾åº¦â€‹ â€‹ | çº¦ â€‹â€‹3~4 ä½åè¿›åˆ¶å°æ•°â€‹â€‹                         | çº¦ â€‹â€‹6~7 ä½åè¿›åˆ¶å°æ•°â€‹â€‹                         | çº¦ â€‹â€‹15~17 ä½åè¿›åˆ¶å°æ•°â€‹â€‹                       |

# Iterator å¯¹è±¡çš„è¾…åŠ©æ–¹æ³•

è¯¥ææ¡ˆåœ¨è¿­ä»£å™¨åŸå‹ä¸Šå¼•å…¥äº†ä¸€ç³»åˆ—æ–°æ–¹æ³•ï¼Œä»¥å…è®¸è¿­ä»£å™¨çš„ä¸€èˆ¬ä½¿ç”¨å’Œä½¿ç”¨ã€‚æœ‰å…³å®ç°æ–¹æ³•çš„å…·ä½“ä¿¡æ¯ï¼Œè¯·å‚é˜…[è§„èŒƒ](https://tc39.es/proposal-iterator-helpers)ã€‚

### æ–¹æ³•åˆ—è¡¨

- `.map(mapperFn)` å°†å‡½æ•°ä½œä¸ºå‚æ•°ã€‚å®ƒå…è®¸ç”¨æˆ·å°†å‡½æ•°åº”ç”¨äºä»è¿­ä»£å™¨è¿”å›çš„æ¯ä¸ªå…ƒç´ ã€‚è¿”å›åº”ç”¨äº† map å‡½æ•°çš„å€¼çš„è¿­ä»£å™¨ã€‚
- `.filter(filtererFn)` å°†å‡½æ•°ä½œä¸ºå‚æ•°ã€‚å®ƒå…è®¸ç”¨æˆ·ä»æœªä¼ é€’è¿‡æ»¤å™¨å‡½æ•°çš„è¿­ä»£å™¨ä¸­è·³è¿‡å€¼ã€‚è¿”å›æ¥è‡ªé€šè¿‡ç­›é€‰å™¨çš„åŸå§‹è¿­ä»£å™¨çš„å€¼çš„è¿­ä»£å™¨ã€‚
- `.take(limit)` å–ä¸€ä¸ªæ•´æ•°ä½œä¸ºå‚æ•°ã€‚å®ƒè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨æœ€å¤šç”Ÿæˆç”±åº•å±‚è¿­ä»£å™¨ç”Ÿæˆçš„ç»™å®šæ•°é‡çš„å…ƒç´ ã€‚è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå…¶ä¸­åŒ…å«åŸå§‹è¿­ä»£å™¨ä¸­çš„é¡¹ç›®ï¼Œä» 0 åˆ°é™åˆ¶ã€‚
- `.drop(limit)` é‡‡ç”¨æ•´æ•°ä½œä¸ºå‚æ•°ã€‚å®ƒè·³è¿‡åº•å±‚è¿­ä»£å™¨ç”Ÿæˆçš„ç»™å®šæ•°é‡çš„å…ƒç´ ï¼Œç„¶åå†ç”Ÿæˆä»»ä½•å‰©ä½™å…ƒç´ ã€‚è¿”å›é™åˆ¶ä¹‹åçš„é¡¹è¿­ä»£å™¨ã€‚
- `.flatMap(mapperFn)` å°†æ˜ å°„å‡½æ•°ä½œä¸ºå‚æ•°ã€‚å®ƒè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨é€šè¿‡å°†æ˜ å°„å‡½æ•°åº”ç”¨äºåº•å±‚è¿­ä»£å™¨ç”Ÿæˆçš„å…ƒç´ è€Œç”Ÿæˆè¿­ä»£å™¨çš„æ‰€æœ‰å…ƒç´ ã€‚è¿”å›å¹³é¢å€¼çš„è¿­ä»£å™¨ã€‚
- `.reduce(reducer [, initialValue ])` å°†å‡½æ•°å’Œå¯é€‰çš„åˆå§‹å€¼ä½œä¸ºå‚æ•°ã€‚å®ƒå…è®¸ç”¨æˆ·å°†å‡½æ•°åº”ç”¨äºä»è¿­ä»£å™¨è¿”å›çš„æ¯ä¸ªå…ƒç´ ï¼ŒåŒæ—¶è·Ÿè¸ª reducer çš„æœ€æ–°ç»“æœï¼ˆå¤‡å¿˜å½•ï¼‰ã€‚å¯¹äºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç»™å®šçš„åˆå§‹å€¼ç”¨ä½œå¤‡å¿˜å½•ã€‚è¿”å›è¿”å›ç»™ reducer å‡½æ•°çš„ç±»å‹çš„å€¼ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºæ•°å­—ï¼‰ã€‚
- `.toArray()` å½“æ‚¨æœ‰ä¸€ä¸ªå¸Œæœ›è½¬æ¢ä¸ºæ•°ç»„çš„éæ— é™è¿­ä»£å™¨æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å†…ç½®çš„ toArray æ–¹æ³•æ¥å®ç°ã€‚è¿”å›ä¸€ä¸ªåŒ…å«è¿­ä»£å™¨å€¼çš„æ•°ç»„ã€‚
- `.forEach(fn)` è¦å°†å‰¯ä½œç”¨ä¸è¿­ä»£å™¨ä¸€èµ·ä½¿ç”¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ .forEach å†…ç½®æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å‡½æ•°ä½œä¸ºå‚æ•°ã€‚ è¿”å›`undefined`ã€‚
- `.some(fn)` è¦æ£€æŸ¥è¿­ä»£å™¨ä¸­æ˜¯å¦æœ‰ä»»ä½•å€¼ä¸ç»™å®šè°“è¯åŒ¹é…ï¼Œå¯ä»¥ä½¿ç”¨ .someã€‚å®ƒé‡‡ç”¨è¿”å› true æˆ– false çš„å‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœä»»ä½•å…ƒç´ åœ¨è°ƒç”¨ fn æ—¶è¿”å› trueï¼Œåˆ™è¯¥å¸ƒå°”å€¼ä¸º trueã€‚è°ƒç”¨æŸäº›è¿­ä»£å™¨æ—¶ï¼Œè¿­ä»£å™¨å°†è¢«æ¶ˆè€—ã€‚
- `.every(fn)` æ¥å—ä¸€ä¸ªè¿”å›å¸ƒå°”å€¼ä½œä¸ºå‚æ•°çš„å‡½æ•°ã€‚å®ƒç”¨äºæ£€æŸ¥è¿­ä»£å™¨ç”Ÿæˆçš„æ¯ä¸ªå€¼æ˜¯å¦éƒ½é€šè¿‡äº†æµ‹è¯•å‡½æ•°ã€‚è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚
- `.find(fn)` å°†å‡½æ•°ä½œä¸ºå‚æ•°ã€‚å®ƒç”¨äºæŸ¥æ‰¾è¿­ä»£å™¨ä¸­åŒ¹é…çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚è¿”å›æ‰¾åˆ°çš„å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰å…ƒç´ ä¸ fn åŒ¹é…ï¼Œåˆ™è¿”å› `undefined`ã€‚
- `Iterator.from(object)` æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼ˆä¸ä¸Šé¢åˆ—å‡ºçš„å…¶ä»–æ–¹æ³•ä¸åŒï¼‰ï¼Œå®ƒå°†å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚æ­¤æ–¹æ³•å…è®¸ä½¿ç”¨è¿­ä»£å™¨åŒ…è£…â€œç±»ä¼¼è¿­ä»£å™¨â€çš„å¯¹è±¡ã€‚å¦‚æœå¯¹è±¡å·²ç»æ˜¯è¿­ä»£å™¨ï¼Œåˆ™è¿”å›å¯¹è±¡ï¼Œå¦‚æœä¼ é€’çš„å¯¹è±¡å®ç°å¯è°ƒç”¨çš„@@iterator å±æ€§ï¼Œåˆ™è¿”å›åŒ…è£…è¿­ä»£å™¨ã€‚

### ä½¿ç”¨

```js tab="map"
function* naturals() {
  let i = 0;
  while (true) {
    yield i;
    i += 1;
  }
}

const result = naturals().map((value) => {
  return value * value;
});
result.next(); //  {value: 0, done: false};
result.next(); //  {value: 1, done: false};
result.next(); //  {value: 4, done: false};
```

```js tab="filter"
function* naturals() {
  let i = 0;
  while (true) {
    yield i;
    i += 1;
  }
}

const result = naturals().filter((value) => {
  return value % 2 == 0;
});
result.next(); //  {value: 0, done: false};
result.next(); //  {value: 2, done: false};
result.next(); //  {value: 4, done: false};
```

```js tab="take"
function* naturals() {
  let i = 0;
  while (true) {
    yield i;
    i += 1;
  }
}

const result = naturals().take(3);
result.next(); //  {value: 0, done: false};
result.next(); //  {value: 1, done: false};
result.next(); //  {value: 2, done: false};
result.next(); //  {value: undefined, done: true};
```

```js tab="drop"
function* naturals() {
  let i = 0;
  while (true) {
    yield i;
    i += 1;
  }
}

const result = naturals().drop(3);
result.next(); //  {value: 3, done: false};
result.next(); //  {value: 4, done: false};
result.next(); //  {value: 5, done: false};
```

```js tab="flatMap"
const sunny = ["It's Sunny in", "", "California"].values();

const result = sunny.flatMap((value) => value.split(" ").values());
result.next(); //  {value: "It's", done: false};
result.next(); //  {value: "Sunny", done: false};
result.next(); //  {value: "in", done: false};
result.next(); //  {value: "", done: false};
result.next(); //  {value: "California", done: false};
result.next(); //  {value: undefined, done: true};
```

```js tab="reduce"
function* naturals() {
  let i = 0;
  while (true) {
    yield i;
    i += 1;
  }
}

const result = naturals()
  .take(5)
  .reduce((sum, value) => {
    return sum + value;
  }, 3);

result; // 13
```

```js tab="toArray"
function* naturals() {
  let i = 0;
  while (true) {
    yield i;
    i += 1;
  }
}

const result = naturals().take(5).toArray();

result; // [0, 1, 2, 3, 4]
```

```js tab="forEach"
const log = [];
const fn = (value) => log.push(value);
const iter = [1, 2, 3].values();

iter.forEach(fn);
console.log(log.join(", ")); // "1, 2, 3"
```

```js tab="some"
function* naturals() {
  let i = 0;
  while (true) {
    yield i;
    i += 1;
  }
}

const iter = naturals().take(4);

iter.some((v) => v > 1); // true
iter.some((v) => true); // false, iterator is already consumed.

naturals()
  .take(4)
  .some((v) => v > 1); // true
naturals()
  .take(4)
  .some((v) => v == 1); // true, acting on a new iterator
```

```js tab="every"
function* naturals() {
  let i = 0;
  while (true) {
    yield i;
    i += 1;
  }
}

const iter = naturals().take(10);

iter.every((v) => v >= 0); // true
iter.every((v) => false); // true, iterator is already consumed.

naturals()
  .take(4)
  .every((v) => v > 0); // false, first value is 0
naturals()
  .take(4)
  .every((v) => v >= 0); // true, acting on a new iterator
```

```js tab="find"
function* naturals() {
  let i = 0;
  while (true) {
    yield i;
    i += 1;
  }
}

naturals().find((v) => v > 1); // 2
```

```js tab="Iterator.from"
class Iter {
  next() {
    return { done: false, value: 1 };
  }
}

const iter = new Iter();
const wrapper = Iterator.from(iter);

wrapper.next(); // { value: 1, done: false }
```

## æ–°å¢ Promise.try æ–¹æ³•

[æ­£å¼è§„èŒƒå†…å®¹](https://tc39.es/proposal-promise-try/) æ­¤ææ¡ˆæ˜¯ [ç¬¬å››é˜¶æ®µ](https://github.com/tc39/proposals) ææ¡ˆ

### ä½¿ç”¨

```js
// ç®€åŒ– Promise é“¾çš„å¤„ç†
Promise.try(() => {
  // å¯èƒ½æŠ›å‡ºé”™è¯¯æˆ–è¿”å›å€¼çš„å‡½æ•°
  return riskyOperation();
}).catch((error) => {
  console.error("æ“ä½œå¤±è´¥:", error);
});
```

### polyfill

- [core-js](https://www.npmjs.com/package/core-js) v3.37+ [æ–‡æ¡£](https://github.com/zloirock/core-js#promisetry)
- es-shims: [promise.try](https://www.npmjs.com/package/promise.try)
